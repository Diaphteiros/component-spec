meta:
  schemaVersion: 'v2'

component:
  name: github.com/gardener/gardener
  version: 'v1.7.2'
  repositoryContexts:
    - eu.gcr.io/gardener-project/components/dev

  sources:
    - name: 'github.com/gardener/gardener'
      type: 'git'
      access:
        type: 'github'
        repoUrl: 'github.com/gardener/gardener'
        ref: 'refs/tags/v1.7.2'

  componentReferences:
    - name: 'etc-druid'
      version: 'v0.3.0'

  localResources:
    - name: 'apiserver'
      # version is implied by component, i.e. v1.7.2 in this case
      type: 'ociImage'
      imageReference: 'eu.gcr.io/gardener-project/gardener/apiserver:v1.7.4'

  externalResources:
    - name: 'grafana'
      version: '7.0.3'
      imageReference: 'registry-1.docker.io/grafana/grafana/7.0.3


overwriteDeclarations:
- declaringComponent:
    name: example.org/foo/bar-overwrites
    version: 0.0.1
    type: 'gardenerComponent'
  overwrites:
    - componentReference:
        name: oci-component
        version: 2.3.4
        type: ociComponent

      dependencyOverwrites:
      - name: 'a-dependency'
        version: '1.2.3'
        type: 'ociImage'
        imageReference: 'alpine:latest'

    - componentReference:
        name: oci-component
        version: 2.3.4
        type: ociComponent

      componentOverwrites:
        uri: bla

    - componentReference:
        name: example.org/foo/bar
        version: 1.2.3
        type: gardenerComponent

      dependencyOverwrites:
      - name: foo
        version: 1.2.3-sap1
        type: ociImage
        imageReference: foo:3.7-sap-1
